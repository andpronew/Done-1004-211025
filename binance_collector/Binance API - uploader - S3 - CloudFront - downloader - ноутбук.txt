–¶–µ–ø–æ—á–∫–∞ ¬´Binance API ‚Üí uploader ‚Üí S3 ‚Üí CloudFront ‚Üí downloader ‚Üí –Ω–æ—É—Ç–±—É–∫¬ª —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

–ü–æ—Å—Ç—Ä–æ—á–Ω–æ —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:

–ß–∞—Å—Ç—å 1: ./uploader
Uploader started. Local dir: ./local_binance, bucket: binance-history-bucket, symbol: BTCUSDT:
üîπ –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–ø—É—Å—Ç–∏–ª–∞—Å—å, –ø–æ–¥—Ç—è–Ω—É–ª–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ config.json. –õ–æ–∫–∞–ª—å–Ω–∞—è –ø–∞–ø–∫–∞ ‚Äî ./local_binance, –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —Å–∫–ª–∞–¥—ã–≤–∞—Ç—å—Å—è —Ç—É–¥–∞ –∏ —Å—Ä–∞–∑—É –∂–µ –≥—Ä—É–∑–∏—Ç—å—Å—è –≤ S3, –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å: https://us-east-1.console.aws.amazon.com/s3/buckets/binance-history-bucket?region=us-east-1&bucketType=general&prefix=data/&showversions=false

Fetching public aggTrades: https://testnet.binance.vision/api/v3/aggTrades?symbol=BTCUSDT&limit=1000:
üîπ Uploader –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ –ø—É–±–ª–∏—á–Ω–æ–º—É API Binance Testnet /aggTrades. –ü–æ–ª—É—á–∞–µ—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–¥–µ–ª–∫–∏ –ø–æ BTCUSDT (1000 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö).

upload: local_binance/bn_BTCUSDT_20250908_222455.json.gz to s3://binance-history-bucket/data/bn_BTCUSDT_20250908_222455.json.gz:
üîπ –°–æ—Ö—Ä–∞–Ω–∏–ª –æ—Ç–≤–µ—Ç Binance –≤ —Ñ–∞–π–ª JSON, —Å–∂–∞–ª –≤ gzip, –∏ –æ—Ç–ø—Ä–∞–≤–∏–ª –≤ S3 –±–∞–∫–µ—Ç (binance-history-bucket/data/...).

upload: ../../../../../tmp/manifest.tmp.json to s3://binance-history-bucket/data/manifest.json :
üîπ –û–±–Ω–æ–≤–∏–ª manifest.json (—Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤, newest-first), —á—Ç–æ–±—ã downstream-—Å–∫—Ä–∏–ø—Ç—ã –∑–Ω–∞–ª–∏, –∫–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã —É–∂–µ –µ—Å—Ç—å –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.

Uploaded and removed local: ./local_binance/bn_BTCUSDT_20250908_222455.json.gz -> s3://binance-history-bucket/data/bn_BTCUSDT_20250908_222455.json.gz :
üîπ –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª —É–¥–∞–ª—ë–Ω. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∫–∞—Ç–∞–ª–æ–≥ ¬´–±—É—Ñ–µ—Ä¬ª (20 GB) –Ω–µ –ø–µ—Ä–µ–ø–æ–ª–Ω–∏—Ç—Å—è.

–ò –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ ~2 –º–∏–Ω—É—Ç—ã: –Ω–æ–≤—ã–π API-–≤—ã–∑–æ–≤, –Ω–æ–≤—ã–π —Ñ–∞–π–ª, gzip, upload –≤ S3, manifest –æ–±–Ω–æ–≤–ª—ë–Ω, –ª–æ–∫–∞–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–æ.

–ß–∞—Å—Ç—å 2: ./downloader
Downloader started. CloudFront: d2tg388r040kxc.cloudfront.net, download dir: ./downloaded:
üîπ Downloader –∑–Ω–∞–µ—Ç CloudFront-–¥–æ–º–µ–Ω –∏ –ª–æ–∫–∞–ª—å–Ω—É—é –ø–∞–ø–∫—É ./downloaded, –∫—É–¥–∞ –∫–ª–∞—Å—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã.

Downloading https://d2tg388r040kxc.cloudfront.net/data/bn_BTCUSDT_20250908_222455.json.gz -> ./downloaded/bn_BTCUSDT_20250908_222455.json.gz:
üîπ –§–∞–π–ª –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ CloudFront. –≠—Ç–æ –∫–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç: –¥–∞–Ω–Ω—ã–µ —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –Ω–µ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ S3, –∞ —á–µ—Ä–µ–∑ CDN, –∏ –ø–µ—Ä–≤—ã–µ 1 TB/–º–µ—Å—è—Ü —Ç—Ä–∞—Ñ–∏–∫–∞ –∏–∑ CloudFront ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ.

100 16611  100 16611    0     0  31591      0 --:--:-- --:--:-- --:--:-- 31579
Downloaded: bn_BTCUSDT_20250908_222455.json.gz
üîπ –§–∞–π–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–ª—É—á–µ–Ω, —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è –Ω–∞ –Ω–æ—É—Ç–±—É–∫. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –≤—Ç–æ—Ä–æ–π —Ñ–∞–π–ª.

–ò—Ç–æ–≥–æ–≤—ã–π —Å–º—ã—Å–ª:
Uploader: —Ä–µ–≥—É–ª—è—Ä–Ω–æ —Ö–æ–¥–∏—Ç –Ω–∞ Binance API, –∑–∞–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –ø–∞–∫—É–µ—Ç –∏—Ö, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ S3, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π manifest, —á–∏—Å—Ç–∏—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π –±—É—Ñ–µ—Ä.
S3: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.
CloudFront: –¥–∞—ë—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π egress (1 TB/–º–µ—Å) –∏ –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ S3-–æ–±—ä–µ–∫—Ç–∞–º.
Downloader: –Ω–∞ –Ω–æ—É—Ç–±—É–∫–µ –ø–æ manifest'—É —Ç—è–Ω–µ—Ç —Å–≤–µ–∂–∏–µ —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ CloudFront, —Å–æ—Ö—Ä–∞–Ω—è—è –∏—Å—Ç–æ—Ä–∏—é –ª–æ–∫–∞–ª—å–Ω–æ.

–≠—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–∞–µ—Ç –∑–∞–¥–∞—á—É: –≤—ã –±–æ–ª—å—à–µ –Ω–µ –ø–ª–∞—Ç–∏—Ç–µ –¥–æ—Ä–æ–≥–æ–π —Ç—Ä–∞—Ñ–∏–∫ –∑–∞ –≤—ã–≥—Ä—É–∑–∫—É –Ω–∞–ø—Ä—è–º—É—é –∏–∑ EC2 (162$/TB), –∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ CloudFront, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–¥–∞—ë—Ç 1 TB –±–µ—Å–ø–ª–∞—Ç–Ω–æ.
